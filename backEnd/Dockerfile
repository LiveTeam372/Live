# ğŸ— ë¹Œë“œ í™˜ê²½
FROM eclipse-temurin:21 AS build
WORKDIR /app

# Gradle Wrapper ë° ì„¤ì • ë³µì‚¬
COPY gradlew .
COPY gradle gradle
RUN chmod +x gradlew

# ë‚˜ë¨¸ì§€ íŒŒì¼ ë³µì‚¬
COPY . .

RUN chmod +x gradlew

# ğŸ“¦ íŒ¨í‚¤ì§€ ë¹Œë“œ
RUN ./gradlew build -x test --no-daemon

# ğŸš€ ì‹¤í–‰ í™˜ê²½
FROM eclipse-temurin:21
WORKDIR /app

# build/libs í´ë”ì— jarì´ ìƒì„±ë¨
COPY --from=build /app/build/libs/*.jar app.jar

EXPOSE 8080
CMD ["java", "-jar", "app.jar"]
